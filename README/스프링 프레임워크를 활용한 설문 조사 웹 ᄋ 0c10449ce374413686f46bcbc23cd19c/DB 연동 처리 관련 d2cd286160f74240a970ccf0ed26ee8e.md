# DB ì—°ë™ ì²˜ë¦¬ ê´€ë ¨

# 1. build.gradle.kts

```kotlin
plugins {
	val kotlinVersion = "1.9.23"
	id("org.springframework.boot") version "3.2.4"
	id("io.spring.dependency-management") version "1.1.4"
	kotlin("jvm") version kotlinVersion
	kotlin("plugin.spring") version kotlinVersion
	kotlin("plugin.jpa") version kotlinVersion
}
dependencies{
	implementation("org.springframework.boot:spring-boot-starter-data-jpa")
	implementation("org.springframework.boot:spring-boot-starter-thymeleaf")
	implementation("org.springframework.boot:spring-boot-starter-web")
	implementation("com.fasterxml.jackson.module:jackson-module-kotlin")
	implementation("org.jetbrains.kotlin:kotlin-reflect")
	developmentOnly("org.springframework.boot:spring-boot-devtools")
	implementation("org.springframework.boot:spring-boot-starter-jdbc")
	implementation("org.springframework.boot:spring-boot-starter-thymeleaf")
	implementation("org.springframework.boot:spring-boot-starter-validation")
	implementation("org.springframework.boot:spring-boot-starter-websocket")

	compileOnly("org.projectlombok:lombok")
	runtimeOnly("com.h2database:h2")
	runtimeOnly("com.mysql:mysql-connector-j")

	testImplementation("org.springframework.boot:spring-boot-starter-test")
}
```

1. plugins
    - `kotlin("plugin.jpa") version kotlinVersion`
2. dependencies
    - `implementation("org.springframework.boot:spring-boot-starter-jdbc")`
    - `runtimeOnly("com.mysql:mysql-connector-j")`

ê° í•­ëª©ë“¤ì„ ì¶”ê°€í•´ì¤€ë‹¤.

# 2. application.yml

```kotlin
server:
  # address: 192.168.204.1 # ITê´€
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/db_survey
    username: root
    password: 1234
  jpa:
    database: mysql
    database-platform: org.hibernate.dialect.MySQLDialect
    properties.hibernate.show_sql: true
    open-in-view: true
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        show_sql: true
        format_sql: true
logging:
  pattern:
    console: "[%d{HH:mm:ss.SSS}][%-5level][%logger.%method:line%line] - %msg%n"
  level:
    org:
      hibernate:
        SQL: debug
        type.descriptor.sql: trace
```

- `spring.datasource` í•˜ìœ„ ì„¤ì •ë“¤ì„ ì‘ì„±í•´ì¤˜ì•¼ í•¨
    - `driver-class-name` : ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•´ `JDBC ë“œë¼ì´ë²„`ì˜ í´ë˜ìŠ¤ ì´ë¦„ì„ ì§€ì •
    - `url` : ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•œ `URL` ì„¤ì • ( `mysql workbench` ì—ì„œ ìƒì„±ëœ )
    - `username` : ë¯¸ë¦¬ ì„¤ì •í•´ ë‘” ì‚¬ìš©ì ì´ë¦„ ì…ë ¥
    - `password` : ë¯¸ë¦¬ ì„¤ì •í•´ ë‘” íŒ¨ìŠ¤ì›Œë“œ ì„¤ì •
- `jpa`
    - `properties.hibernate.show_sql : true` ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— sqlë¡œ ì ‘ê·¼í–ˆì„ë•Œ ì½˜ì†” ë¡œê·¸ë¥¼ ë‚¨ê¹€
    - `ddl-auto: update` ë¡œ ì„¤ì •í•˜ë©´ SpringBootApplicationì„ ì¬ì‹¤í–‰í•´ë„ DBê°€ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•ŠìŒ. `ddl-auto: create` ë¡œ ì„¤ì •í•˜ë©´ ì¬ì‹¤í–‰ ì‹œ DBê°€ reset ë¨

# 3. MYSQL ì„œë²„ ì„¤ì¹˜ ë° ì„¤ì •

<aside>
ğŸ’¡ ì§€ë‚œ ë‘ íŒŒì¼ì„ ì„¤ì •í•˜ê¸° ì „ì—, MYSQL ì„œë²„ ì„¤ì¹˜ê°€ ë¯¸ë¦¬ ì§„í–‰ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

ì„¤ì¹˜ ì‹œ ì„¤ì •í•œ root ë¹„ë°€ë²ˆí˜¸ì™€ í¬íŠ¸ë²ˆí˜¸ë¥¼ ê¸°ì–µí•´ë‘ì.

</aside>

1. ì„¤ì¹˜ í›„, MySQL Workbench ë©”ì¸

![image.png](DB%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%A7%E1%86%AB%20d2cd286160f74240a970ccf0ed26ee8e/image.png)

MySQL Connections ì˜†ì˜ + ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒˆë¡œìš´ Connection ì„ ìƒì„±í•´ì¤€ë‹¤.

1. ìƒì„±ëœ ê³„ì •ìœ¼ë¡œ DB ì ‘ì†

![image.png](DB%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%A7%E1%86%AB%20d2cd286160f74240a970ccf0ed26ee8e/image%201.png)

ì¢Œì¸¡ì˜ SCHEMASì—ì„œ ìƒˆë¡œ ìƒì„± í•  DBë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ì¤€ë‹¤. 

(ì„¤ì • íŒŒì¼ì— `ddl-auto : update`ë¡œ ì„¤ì •í•´ë‘ì—ˆê¸° ë•Œë¬¸)

ì´í›„, `IntelliJ`ì—ì„œ `SpringBootApplication`ì„ ì‹¤í–‰ ì‹œí‚¤ë©´, DBì— ì—°ê²°ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

`Test Code`ë¥¼ ì‘ì„±í•˜ê±°ë‚˜, `PostMan`ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ DB ì—°ê²°ì´ ì˜ ë˜ì—ˆëŠ”ì§€ ì ê²€í•  ìˆ˜ ìˆë‹¤.