<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Participate in Survey</title>
</head>
<body>
<h1>Participate in Survey</h1>
<form th:action="@{/home/list/participate/{surveyId}(surveyId=${surveyId})}" th:object="${AnswerListForm}"
      method="post">
    <p th:text="${survey.discription}"></p>
    <div th:each="question, idx : ${questions}">
        <p th:text="${question.context}"></p>
        <th:block th:if="${question.questionType.name() == 'MULTIPLE_CHOICE'}">
            <div th:each="option, optionIdx : ${question.questionOptions}">
                <label th:for="${'question' + idx.index + 'option' + optionIdx.index}">
                    <input type="radio" th:id="${'question' + idx.index + 'option' + optionIdx.index}"
                           th:name="${'answerList[' + idx.index + '].selectedOptionId'}"
                           th:value="${option.questionOptionId}"/>
                    <span th:text="${option.questionOption}"></span>
                </label>
            </div>
        </th:block>
        <th:block th:if="${question.questionType.name() == 'SUBJECTIVE'}">
            <label th:for="${'question' + idx.index}">
                <input type="text" th:id="${'question' + idx.index}" th:name="${'answerList[' + idx.index + '].text'}"/>
            </label>
        </th:block>
        <input type="hidden" th:name="${'answerList[' + idx.index + '].questionId'}" th:value="${question.questionId}"/>
        <input type="hidden" th:name="${'answerList[' + idx.index + '].answerType'}"
               th:value="${question.questionType}"/>
    </div>
    <button type="submit">Submit Answers</button>
</form>
</body>
</html>